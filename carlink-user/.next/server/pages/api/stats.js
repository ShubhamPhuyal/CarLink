"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/stats";
exports.ids = ["pages/api/stats"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstats.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstats.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_stats_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\stats.js */ \"(api)/./pages/api/stats.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_stats_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_stats_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/stats\",\n        pathname: \"/api/stats\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_stats_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnN0YXRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNzdGF0cy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRDtBQUNuRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmxpbmstdXNlci8/MDhkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHN0YXRzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RhdHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdGF0c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstats.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!process.env.MONGODB_URI) {\n    throw new Error('Invalid/Missing environment variable: \"MONGODB_URI\"');\n}\nconst uri = process.env.MONGODB_URI;\nconst options = {\n    serverApi: {\n        version: mongodb__WEBPACK_IMPORTED_MODULE_0__.ServerApiVersion.v1,\n        strict: true,\n        deprecationErrors: true\n    }\n};\nlet client;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClient) {\n        global._mongoClient = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n    }\n    client = global._mongoClient;\n} else {}\n// Export a module-scoped MongoClient. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (client);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBd0Q7QUFFeEQsSUFBSSxDQUFDRSxRQUFRQyxHQUFHLENBQUNDLFdBQVcsRUFBRTtJQUM1QixNQUFNLElBQUlDLE1BQU07QUFDbEI7QUFFQSxNQUFNQyxNQUFNSixRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFDbkMsTUFBTUcsVUFBVTtJQUNkQyxXQUFXO1FBQ1RDLFNBQVNSLHFEQUFnQkEsQ0FBQ1MsRUFBRTtRQUM1QkMsUUFBUTtRQUNSQyxtQkFBbUI7SUFDckI7QUFDRjtBQUVBLElBQUlDO0FBRUosSUFBSVgsSUFBc0MsRUFBRTtJQUMxQywrREFBK0Q7SUFDL0QsNkVBQTZFO0lBQzdFLElBQUksQ0FBQ1ksT0FBT0MsWUFBWSxFQUFFO1FBQ3hCRCxPQUFPQyxZQUFZLEdBQUcsSUFBSWYsZ0RBQVdBLENBQUNNLEtBQUtDO0lBQzdDO0lBQ0FNLFNBQVNDLE9BQU9DLFlBQVk7QUFDOUIsT0FBTyxFQUdOO0FBRUQseURBQXlEO0FBQ3pELDhEQUE4RDtBQUM5RCxpRUFBZUYsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmxpbmstdXNlci8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQsIFNlcnZlckFwaVZlcnNpb24gfSBmcm9tIFwibW9uZ29kYlwiO1xyXG5cclxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignSW52YWxpZC9NaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlOiBcIk1PTkdPREJfVVJJXCInKTtcclxufVxyXG5cclxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcbmNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgc2VydmVyQXBpOiB7XHJcbiAgICB2ZXJzaW9uOiBTZXJ2ZXJBcGlWZXJzaW9uLnYxLFxyXG4gICAgc3RyaWN0OiB0cnVlLFxyXG4gICAgZGVwcmVjYXRpb25FcnJvcnM6IHRydWUsXHJcbiAgfSxcclxufTtcclxuXHJcbmxldCBjbGllbnQ7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xyXG4gIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxyXG4gIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXHJcbiAgaWYgKCFnbG9iYWwuX21vbmdvQ2xpZW50KSB7XHJcbiAgICBnbG9iYWwuX21vbmdvQ2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XHJcbiAgfVxyXG4gIGNsaWVudCA9IGdsb2JhbC5fbW9uZ29DbGllbnQ7XHJcbn0gZWxzZSB7XHJcbiAgLy8gSW4gcHJvZHVjdGlvbiBtb2RlLCBpdCdzIGJlc3QgdG8gbm90IHVzZSBhIGdsb2JhbCB2YXJpYWJsZS5cclxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcclxufVxyXG5cclxuLy8gRXhwb3J0IGEgbW9kdWxlLXNjb3BlZCBNb25nb0NsaWVudC4gQnkgZG9pbmcgdGhpcyBpbiBhXHJcbi8vIHNlcGFyYXRlIG1vZHVsZSwgdGhlIGNsaWVudCBjYW4gYmUgc2hhcmVkIGFjcm9zcyBmdW5jdGlvbnMuXHJcbmV4cG9ydCBkZWZhdWx0IGNsaWVudDtcclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiU2VydmVyQXBpVmVyc2lvbiIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsIkVycm9yIiwidXJpIiwib3B0aW9ucyIsInNlcnZlckFwaSIsInZlcnNpb24iLCJ2MSIsInN0cmljdCIsImRlcHJlY2F0aW9uRXJyb3JzIiwiY2xpZW50IiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api)/./pages/api/stats.js":
/*!****************************!*\
  !*** ./pages/api/stats.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/mongodb */ \"(api)/./lib/mongodb.js\");\n\nasync function handler(req, res) {\n    try {\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        const db = client.db();\n        // Get the existing data (if any) from the client\n        const { lastFetchedTimestamp } = req.query;\n        const lastFetchTime = lastFetchedTimestamp ? new Date(parseInt(lastFetchedTimestamp)) : new Date(0);\n        // Get all data in parallel\n        const [categoriesCount, productsCount, ordersCount, usersCount, bookingsCount, rentalsCount, categories, ordersPerDay, bookingsPerDay, rentalsPerDay, topBuyers, mostBookedProducts, mostRentedCars, bookingDurationStats, rentalDurationStats, recentOrders, recentBookings, recentRentals] = await Promise.all([\n            db.collection(\"categories\").countDocuments(),\n            db.collection(\"products\").countDocuments(),\n            db.collection(\"orders\").countDocuments(),\n            db.collection(\"users\").countDocuments(),\n            db.collection(\"bookings\").countDocuments(),\n            db.collection(\"carrentalbookings\").countDocuments(),\n            db.collection(\"categories\").find().toArray(),\n            db.collection(\"orders\").aggregate([\n                {\n                    $group: {\n                        _id: {\n                            $dateToString: {\n                                format: \"%Y-%m-%d\",\n                                date: \"$createdAt\"\n                            }\n                        },\n                        count: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        _id: 1\n                    }\n                }\n            ]).toArray(),\n            db.collection(\"bookings\").aggregate([\n                {\n                    $group: {\n                        _id: {\n                            $dateToString: {\n                                format: \"%Y-%m-%d\",\n                                date: \"$createdAt\"\n                            }\n                        },\n                        count: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        _id: 1\n                    }\n                }\n            ]).toArray(),\n            db.collection(\"carrentalbookings\").aggregate([\n                {\n                    $group: {\n                        _id: {\n                            $dateToString: {\n                                format: \"%Y-%m-%d\",\n                                date: \"$createdAt\"\n                            }\n                        },\n                        count: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        _id: 1\n                    }\n                }\n            ]).toArray(),\n            db.collection(\"orders\").aggregate([\n                {\n                    $group: {\n                        _id: \"$email\",\n                        name: {\n                            $first: \"$name\"\n                        },\n                        city: {\n                            $first: \"$city\"\n                        },\n                        country: {\n                            $first: \"$country\"\n                        },\n                        orderCount: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        orderCount: -1\n                    }\n                },\n                {\n                    $limit: 5\n                },\n                {\n                    $project: {\n                        email: \"$_id\",\n                        name: 1,\n                        city: 1,\n                        country: 1,\n                        orderCount: 1,\n                        _id: 0\n                    }\n                }\n            ]).toArray(),\n            db.collection(\"bookings\").aggregate([\n                {\n                    $group: {\n                        _id: \"$productName\",\n                        count: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        count: -1\n                    }\n                },\n                {\n                    $limit: 5\n                }\n            ]).toArray(),\n            db.collection(\"carrentalbookings\").aggregate([\n                {\n                    $group: {\n                        _id: \"$carName\",\n                        count: {\n                            $sum: 1\n                        }\n                    }\n                },\n                {\n                    $sort: {\n                        count: -1\n                    }\n                },\n                {\n                    $limit: 5\n                }\n            ]).toArray(),\n            db.collection(\"bookings\").aggregate([\n                {\n                    $project: {\n                        durationDays: {\n                            $divide: [\n                                {\n                                    $subtract: [\n                                        \"$endDate\",\n                                        \"$startDate\"\n                                    ]\n                                },\n                                1000 * 60 * 60 * 24\n                            ]\n                        }\n                    }\n                },\n                {\n                    $group: {\n                        _id: null,\n                        avgDuration: {\n                            $avg: \"$durationDays\"\n                        },\n                        minDuration: {\n                            $min: \"$durationDays\"\n                        },\n                        maxDuration: {\n                            $max: \"$durationDays\"\n                        }\n                    }\n                }\n            ]).toArray(),\n            db.collection(\"carrentalbookings\").aggregate([\n                {\n                    $project: {\n                        durationDays: {\n                            $divide: [\n                                {\n                                    $subtract: [\n                                        \"$endDate\",\n                                        \"$startDate\"\n                                    ]\n                                },\n                                1000 * 60 * 60 * 24\n                            ]\n                        }\n                    }\n                },\n                {\n                    $group: {\n                        _id: null,\n                        avgDuration: {\n                            $avg: \"$durationDays\"\n                        },\n                        minDuration: {\n                            $min: \"$durationDays\"\n                        },\n                        maxDuration: {\n                            $max: \"$durationDays\"\n                        }\n                    }\n                }\n            ]).toArray(),\n            // For recent orders, only get those after the last fetch time\n            db.collection(\"orders\").find({\n                createdAt: {\n                    $gt: lastFetchTime\n                }\n            }).sort({\n                createdAt: -1\n            }).limit(5).toArray(),\n            // For recent bookings, only get those after the last fetch time\n            db.collection(\"bookings\").find({\n                createdAt: {\n                    $gt: lastFetchTime\n                }\n            }).sort({\n                createdAt: -1\n            }).limit(5).toArray(),\n            // For recent rentals, only get those after the last fetch time\n            db.collection(\"carrentalbookings\").find({\n                createdAt: {\n                    $gt: lastFetchTime\n                }\n            }).sort({\n                createdAt: -1\n            }).limit(5).toArray()\n        ]);\n        // Process category data\n        const categoryData = await Promise.all(categories.map(async (category)=>{\n            const count = await db.collection(\"products\").countDocuments({\n                category: category._id\n            });\n            return {\n                name: category.name,\n                count\n            };\n        }));\n        // Format recent activities\n        const recentActivities = [\n            ...recentOrders.map((order)=>({\n                    type: \"order\",\n                    title: \"New Order\",\n                    message: `Order #${order.orderNumber} by ${order.name}`,\n                    createdAt: order.createdAt,\n                    metadata: {\n                        orderId: order._id\n                    }\n                })),\n            ...recentBookings.map((booking)=>({\n                    type: \"booking\",\n                    title: \"New Booking\",\n                    message: `Booking for ${booking.productName}`,\n                    createdAt: booking.createdAt,\n                    metadata: {\n                        bookingId: booking._id\n                    }\n                })),\n            ...recentRentals.map((rental)=>({\n                    type: \"rental\",\n                    title: \"New Rental\",\n                    message: `Rental for ${rental.carName}`,\n                    createdAt: rental.createdAt,\n                    metadata: {\n                        rentalId: rental._id\n                    }\n                }))\n        ].sort((a, b)=>new Date(b.createdAt) - new Date(a.createdAt)).slice(0, 10);\n        // Emit new activities via socket if there are any and if socket is initialized\n        if (recentActivities.length > 0 && res.socket.server.io) {\n            res.socket.server.io.emit(\"newActivities\", recentActivities);\n        }\n        // Send response with all data\n        res.status(200).json({\n            categoriesCount,\n            productsCount,\n            ordersCount,\n            usersCount,\n            bookingsCount,\n            rentalsCount,\n            categoryData,\n            ordersPerDay,\n            bookingsPerDay,\n            rentalsPerDay,\n            topBuyers,\n            mostBookedProducts,\n            mostRentedCars,\n            bookingDuration: bookingDurationStats[0] || {\n                avgDuration: 0,\n                minDuration: 0,\n                maxDuration: 0\n            },\n            rentalDuration: rentalDurationStats[0] || {\n                avgDuration: 0,\n                minDuration: 0,\n                maxDuration: 0\n            },\n            totalRevenueSources: {\n                orders: ordersCount,\n                bookings: bookingsCount,\n                rentals: rentalsCount\n            },\n            recentActivities,\n            timestamp: new Date().getTime()\n        });\n    } catch (error) {\n        console.error(\"Error fetching stats:\", error);\n        res.status(500).json({\n            error: \"Internal Server Error\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJdUYsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQmhGO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FpRDtZQUNBL0M7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQXFFLGlCQUFpQnBFLG9CQUFvQixDQUFDLEVBQUUsSUFBSTtnQkFDMUMrQixhQUFhO2dCQUNiRSxhQUFhO2dCQUNiRSxhQUFhO1lBQ2Y7WUFDQWtDLGdCQUFnQnBFLG1CQUFtQixDQUFDLEVBQUUsSUFBSTtnQkFDeEM4QixhQUFhO2dCQUNiRSxhQUFhO2dCQUNiRSxhQUFhO1lBQ2Y7WUFDQW1DLHFCQUFxQjtnQkFDbkJDLFFBQVFsRjtnQkFDUm1GLFVBQVVqRjtnQkFDVmtGLFNBQVNqRjtZQUNYO1lBQ0FvRDtZQUNBOEIsV0FBVyxJQUFJekYsT0FBTzBGLE9BQU87UUFDL0I7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkNqRyxJQUFJdUYsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQlMsT0FBTztZQUNQRSxTQUFTRixNQUFNNUIsT0FBTztRQUN4QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXJsaW5rLXVzZXIvLi9wYWdlcy9hcGkvc3RhdHMuanM/ODRmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tIFwiQC9saWIvbW9uZ29kYlwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xyXG4gICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcclxuXHJcbiAgICAvLyBHZXQgdGhlIGV4aXN0aW5nIGRhdGEgKGlmIGFueSkgZnJvbSB0aGUgY2xpZW50XHJcbiAgICBjb25zdCB7IGxhc3RGZXRjaGVkVGltZXN0YW1wIH0gPSByZXEucXVlcnk7XHJcbiAgICBjb25zdCBsYXN0RmV0Y2hUaW1lID0gbGFzdEZldGNoZWRUaW1lc3RhbXAgPyBuZXcgRGF0ZShwYXJzZUludChsYXN0RmV0Y2hlZFRpbWVzdGFtcCkpIDogbmV3IERhdGUoMCk7XHJcblxyXG4gICAgLy8gR2V0IGFsbCBkYXRhIGluIHBhcmFsbGVsXHJcbiAgICBjb25zdCBbXHJcbiAgICAgIGNhdGVnb3JpZXNDb3VudCxcclxuICAgICAgcHJvZHVjdHNDb3VudCxcclxuICAgICAgb3JkZXJzQ291bnQsXHJcbiAgICAgIHVzZXJzQ291bnQsXHJcbiAgICAgIGJvb2tpbmdzQ291bnQsXHJcbiAgICAgIHJlbnRhbHNDb3VudCxcclxuICAgICAgY2F0ZWdvcmllcyxcclxuICAgICAgb3JkZXJzUGVyRGF5LFxyXG4gICAgICBib29raW5nc1BlckRheSxcclxuICAgICAgcmVudGFsc1BlckRheSxcclxuICAgICAgdG9wQnV5ZXJzLFxyXG4gICAgICBtb3N0Qm9va2VkUHJvZHVjdHMsXHJcbiAgICAgIG1vc3RSZW50ZWRDYXJzLFxyXG4gICAgICBib29raW5nRHVyYXRpb25TdGF0cyxcclxuICAgICAgcmVudGFsRHVyYXRpb25TdGF0cyxcclxuICAgICAgcmVjZW50T3JkZXJzLFxyXG4gICAgICByZWNlbnRCb29raW5ncyxcclxuICAgICAgcmVjZW50UmVudGFsc1xyXG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgZGIuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIikuY291bnREb2N1bWVudHMoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcInByb2R1Y3RzXCIpLmNvdW50RG9jdW1lbnRzKCksXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIikuY291bnREb2N1bWVudHMoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmNvdW50RG9jdW1lbnRzKCksXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJib29raW5nc1wiKS5jb3VudERvY3VtZW50cygpLFxyXG4gICAgICBkYi5jb2xsZWN0aW9uKFwiY2FycmVudGFsYm9va2luZ3NcIikuY291bnREb2N1bWVudHMoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcImNhdGVnb3JpZXNcIikuZmluZCgpLnRvQXJyYXkoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcIm9yZGVyc1wiKS5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6IHsgJGRhdGVUb1N0cmluZzogeyBmb3JtYXQ6IFwiJVktJW0tJWRcIiwgZGF0ZTogXCIkY3JlYXRlZEF0XCIgfSB9LFxyXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAkc29ydDogeyBfaWQ6IDEgfSB9LFxyXG4gICAgICBdKS50b0FycmF5KCksXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJib29raW5nc1wiKS5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6IHsgJGRhdGVUb1N0cmluZzogeyBmb3JtYXQ6IFwiJVktJW0tJWRcIiwgZGF0ZTogXCIkY3JlYXRlZEF0XCIgfSB9LFxyXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAkc29ydDogeyBfaWQ6IDEgfSB9LFxyXG4gICAgICBdKS50b0FycmF5KCksXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJjYXJyZW50YWxib29raW5nc1wiKS5hZ2dyZWdhdGUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICRncm91cDoge1xyXG4gICAgICAgICAgICBfaWQ6IHsgJGRhdGVUb1N0cmluZzogeyBmb3JtYXQ6IFwiJVktJW0tJWRcIiwgZGF0ZTogXCIkY3JlYXRlZEF0XCIgfSB9LFxyXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAkc29ydDogeyBfaWQ6IDEgfSB9LFxyXG4gICAgICBdKS50b0FycmF5KCksXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIikuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkZ3JvdXA6IHtcclxuICAgICAgICAgICAgX2lkOiBcIiRlbWFpbFwiLFxyXG4gICAgICAgICAgICBuYW1lOiB7ICRmaXJzdDogXCIkbmFtZVwiIH0sXHJcbiAgICAgICAgICAgIGNpdHk6IHsgJGZpcnN0OiBcIiRjaXR5XCIgfSxcclxuICAgICAgICAgICAgY291bnRyeTogeyAkZmlyc3Q6IFwiJGNvdW50cnlcIiB9LFxyXG4gICAgICAgICAgICBvcmRlckNvdW50OiB7ICRzdW06IDEgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyAkc29ydDogeyBvcmRlckNvdW50OiAtMSB9IH0sXHJcbiAgICAgICAgeyAkbGltaXQ6IDUgfSxcclxuICAgICAgICB7ICRwcm9qZWN0OiB7IFxyXG4gICAgICAgICAgICBlbWFpbDogXCIkX2lkXCIsXHJcbiAgICAgICAgICAgIG5hbWU6IDEsXHJcbiAgICAgICAgICAgIGNpdHk6IDEsXHJcbiAgICAgICAgICAgIGNvdW50cnk6IDEsXHJcbiAgICAgICAgICAgIG9yZGVyQ291bnQ6IDEsXHJcbiAgICAgICAgICAgIF9pZDogMFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXSkudG9BcnJheSgpLFxyXG4gICAgICBkYi5jb2xsZWN0aW9uKFwiYm9va2luZ3NcIikuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkZ3JvdXA6IHtcclxuICAgICAgICAgICAgX2lkOiBcIiRwcm9kdWN0TmFtZVwiLFxyXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgJHNvcnQ6IHsgY291bnQ6IC0xIH0gfSxcclxuICAgICAgICB7ICRsaW1pdDogNSB9XHJcbiAgICAgIF0pLnRvQXJyYXkoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcImNhcnJlbnRhbGJvb2tpbmdzXCIpLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogXCIkY2FyTmFtZVwiLFxyXG4gICAgICAgICAgICBjb3VudDogeyAkc3VtOiAxIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgJHNvcnQ6IHsgY291bnQ6IC0xIH0gfSxcclxuICAgICAgICB7ICRsaW1pdDogNSB9XHJcbiAgICAgIF0pLnRvQXJyYXkoKSxcclxuICAgICAgZGIuY29sbGVjdGlvbihcImJvb2tpbmdzXCIpLmFnZ3JlZ2F0ZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJHByb2plY3Q6IHtcclxuICAgICAgICAgICAgZHVyYXRpb25EYXlzOiB7XHJcbiAgICAgICAgICAgICAgJGRpdmlkZTogW1xyXG4gICAgICAgICAgICAgICAgeyAkc3VidHJhY3Q6IFtcIiRlbmREYXRlXCIsIFwiJHN0YXJ0RGF0ZVwiXSB9LFxyXG4gICAgICAgICAgICAgICAgMTAwMCAqIDYwICogNjAgKiAyNFxyXG4gICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJGdyb3VwOiB7XHJcbiAgICAgICAgICAgIF9pZDogbnVsbCxcclxuICAgICAgICAgICAgYXZnRHVyYXRpb246IHsgJGF2ZzogXCIkZHVyYXRpb25EYXlzXCIgfSxcclxuICAgICAgICAgICAgbWluRHVyYXRpb246IHsgJG1pbjogXCIkZHVyYXRpb25EYXlzXCIgfSxcclxuICAgICAgICAgICAgbWF4RHVyYXRpb246IHsgJG1heDogXCIkZHVyYXRpb25EYXlzXCIgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXSkudG9BcnJheSgpLFxyXG4gICAgICBkYi5jb2xsZWN0aW9uKFwiY2FycmVudGFsYm9va2luZ3NcIikuYWdncmVnYXRlKFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkcHJvamVjdDoge1xyXG4gICAgICAgICAgICBkdXJhdGlvbkRheXM6IHtcclxuICAgICAgICAgICAgICAkZGl2aWRlOiBbXHJcbiAgICAgICAgICAgICAgICB7ICRzdWJ0cmFjdDogW1wiJGVuZERhdGVcIiwgXCIkc3RhcnREYXRlXCJdIH0sXHJcbiAgICAgICAgICAgICAgICAxMDAwICogNjAgKiA2MCAqIDI0XHJcbiAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAkZ3JvdXA6IHtcclxuICAgICAgICAgICAgX2lkOiBudWxsLFxyXG4gICAgICAgICAgICBhdmdEdXJhdGlvbjogeyAkYXZnOiBcIiRkdXJhdGlvbkRheXNcIiB9LFxyXG4gICAgICAgICAgICBtaW5EdXJhdGlvbjogeyAkbWluOiBcIiRkdXJhdGlvbkRheXNcIiB9LFxyXG4gICAgICAgICAgICBtYXhEdXJhdGlvbjogeyAkbWF4OiBcIiRkdXJhdGlvbkRheXNcIiB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdKS50b0FycmF5KCksXHJcbiAgICAgIC8vIEZvciByZWNlbnQgb3JkZXJzLCBvbmx5IGdldCB0aG9zZSBhZnRlciB0aGUgbGFzdCBmZXRjaCB0aW1lXHJcbiAgICAgIGRiLmNvbGxlY3Rpb24oXCJvcmRlcnNcIilcclxuICAgICAgICAuZmluZCh7IGNyZWF0ZWRBdDogeyAkZ3Q6IGxhc3RGZXRjaFRpbWUgfSB9KVxyXG4gICAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxyXG4gICAgICAgIC5saW1pdCg1KVxyXG4gICAgICAgIC50b0FycmF5KCksXHJcbiAgICAgIC8vIEZvciByZWNlbnQgYm9va2luZ3MsIG9ubHkgZ2V0IHRob3NlIGFmdGVyIHRoZSBsYXN0IGZldGNoIHRpbWVcclxuICAgICAgZGIuY29sbGVjdGlvbihcImJvb2tpbmdzXCIpXHJcbiAgICAgICAgLmZpbmQoeyBjcmVhdGVkQXQ6IHsgJGd0OiBsYXN0RmV0Y2hUaW1lIH0gfSlcclxuICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcclxuICAgICAgICAubGltaXQoNSlcclxuICAgICAgICAudG9BcnJheSgpLFxyXG4gICAgICAvLyBGb3IgcmVjZW50IHJlbnRhbHMsIG9ubHkgZ2V0IHRob3NlIGFmdGVyIHRoZSBsYXN0IGZldGNoIHRpbWVcclxuICAgICAgZGIuY29sbGVjdGlvbihcImNhcnJlbnRhbGJvb2tpbmdzXCIpXHJcbiAgICAgICAgLmZpbmQoeyBjcmVhdGVkQXQ6IHsgJGd0OiBsYXN0RmV0Y2hUaW1lIH0gfSlcclxuICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcclxuICAgICAgICAubGltaXQoNSlcclxuICAgICAgICAudG9BcnJheSgpXHJcbiAgICBdKTtcclxuXHJcbiAgICAvLyBQcm9jZXNzIGNhdGVnb3J5IGRhdGFcclxuICAgIGNvbnN0IGNhdGVnb3J5RGF0YSA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICBjYXRlZ29yaWVzLm1hcChhc3luYyAoY2F0ZWdvcnkpID0+IHtcclxuICAgICAgICBjb25zdCBjb3VudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJwcm9kdWN0c1wiKS5jb3VudERvY3VtZW50cyh7XHJcbiAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnkuX2lkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7IG5hbWU6IGNhdGVnb3J5Lm5hbWUsIGNvdW50IH07XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIEZvcm1hdCByZWNlbnQgYWN0aXZpdGllc1xyXG4gICAgY29uc3QgcmVjZW50QWN0aXZpdGllcyA9IFtcclxuICAgICAgLi4ucmVjZW50T3JkZXJzLm1hcChvcmRlciA9PiAoe1xyXG4gICAgICAgIHR5cGU6ICdvcmRlcicsXHJcbiAgICAgICAgdGl0bGU6ICdOZXcgT3JkZXInLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBPcmRlciAjJHtvcmRlci5vcmRlck51bWJlcn0gYnkgJHtvcmRlci5uYW1lfWAsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBvcmRlci5jcmVhdGVkQXQsXHJcbiAgICAgICAgbWV0YWRhdGE6IHsgb3JkZXJJZDogb3JkZXIuX2lkIH1cclxuICAgICAgfSkpLFxyXG4gICAgICAuLi5yZWNlbnRCb29raW5ncy5tYXAoYm9va2luZyA9PiAoe1xyXG4gICAgICAgIHR5cGU6ICdib29raW5nJyxcclxuICAgICAgICB0aXRsZTogJ05ldyBCb29raW5nJyxcclxuICAgICAgICBtZXNzYWdlOiBgQm9va2luZyBmb3IgJHtib29raW5nLnByb2R1Y3ROYW1lfWAsXHJcbiAgICAgICAgY3JlYXRlZEF0OiBib29raW5nLmNyZWF0ZWRBdCxcclxuICAgICAgICBtZXRhZGF0YTogeyBib29raW5nSWQ6IGJvb2tpbmcuX2lkIH1cclxuICAgICAgfSkpLFxyXG4gICAgICAuLi5yZWNlbnRSZW50YWxzLm1hcChyZW50YWwgPT4gKHtcclxuICAgICAgICB0eXBlOiAncmVudGFsJyxcclxuICAgICAgICB0aXRsZTogJ05ldyBSZW50YWwnLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBSZW50YWwgZm9yICR7cmVudGFsLmNhck5hbWV9YCxcclxuICAgICAgICBjcmVhdGVkQXQ6IHJlbnRhbC5jcmVhdGVkQXQsXHJcbiAgICAgICAgbWV0YWRhdGE6IHsgcmVudGFsSWQ6IHJlbnRhbC5faWQgfVxyXG4gICAgICB9KSlcclxuICAgIF0uc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYi5jcmVhdGVkQXQpIC0gbmV3IERhdGUoYS5jcmVhdGVkQXQpKVxyXG4gICAgLnNsaWNlKDAsIDEwKTtcclxuXHJcbiAgICAvLyBFbWl0IG5ldyBhY3Rpdml0aWVzIHZpYSBzb2NrZXQgaWYgdGhlcmUgYXJlIGFueSBhbmQgaWYgc29ja2V0IGlzIGluaXRpYWxpemVkXHJcbiAgICBpZiAocmVjZW50QWN0aXZpdGllcy5sZW5ndGggPiAwICYmIHJlcy5zb2NrZXQuc2VydmVyLmlvKSB7XHJcbiAgICAgIHJlcy5zb2NrZXQuc2VydmVyLmlvLmVtaXQoJ25ld0FjdGl2aXRpZXMnLCByZWNlbnRBY3Rpdml0aWVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTZW5kIHJlc3BvbnNlIHdpdGggYWxsIGRhdGFcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgIGNhdGVnb3JpZXNDb3VudCwgXHJcbiAgICAgIHByb2R1Y3RzQ291bnQsIFxyXG4gICAgICBvcmRlcnNDb3VudCwgXHJcbiAgICAgIHVzZXJzQ291bnQsIFxyXG4gICAgICBib29raW5nc0NvdW50LFxyXG4gICAgICByZW50YWxzQ291bnQsXHJcbiAgICAgIGNhdGVnb3J5RGF0YSwgXHJcbiAgICAgIG9yZGVyc1BlckRheSxcclxuICAgICAgYm9va2luZ3NQZXJEYXksXHJcbiAgICAgIHJlbnRhbHNQZXJEYXksXHJcbiAgICAgIHRvcEJ1eWVycyxcclxuICAgICAgbW9zdEJvb2tlZFByb2R1Y3RzLFxyXG4gICAgICBtb3N0UmVudGVkQ2FycyxcclxuICAgICAgYm9va2luZ0R1cmF0aW9uOiBib29raW5nRHVyYXRpb25TdGF0c1swXSB8fCB7XHJcbiAgICAgICAgYXZnRHVyYXRpb246IDAsXHJcbiAgICAgICAgbWluRHVyYXRpb246IDAsXHJcbiAgICAgICAgbWF4RHVyYXRpb246IDBcclxuICAgICAgfSxcclxuICAgICAgcmVudGFsRHVyYXRpb246IHJlbnRhbER1cmF0aW9uU3RhdHNbMF0gfHwge1xyXG4gICAgICAgIGF2Z0R1cmF0aW9uOiAwLFxyXG4gICAgICAgIG1pbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgIG1heER1cmF0aW9uOiAwXHJcbiAgICAgIH0sXHJcbiAgICAgIHRvdGFsUmV2ZW51ZVNvdXJjZXM6IHtcclxuICAgICAgICBvcmRlcnM6IG9yZGVyc0NvdW50LFxyXG4gICAgICAgIGJvb2tpbmdzOiBib29raW5nc0NvdW50LFxyXG4gICAgICAgIHJlbnRhbHM6IHJlbnRhbHNDb3VudFxyXG4gICAgICB9LFxyXG4gICAgICByZWNlbnRBY3Rpdml0aWVzLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN0YXRzOlwiLCBlcnJvcik7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogXCJJbnRlcm5hbCBTZXJ2ZXIgRXJyb3JcIixcclxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSBcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJjbGllbnRQcm9taXNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNsaWVudCIsImRiIiwibGFzdEZldGNoZWRUaW1lc3RhbXAiLCJxdWVyeSIsImxhc3RGZXRjaFRpbWUiLCJEYXRlIiwicGFyc2VJbnQiLCJjYXRlZ29yaWVzQ291bnQiLCJwcm9kdWN0c0NvdW50Iiwib3JkZXJzQ291bnQiLCJ1c2Vyc0NvdW50IiwiYm9va2luZ3NDb3VudCIsInJlbnRhbHNDb3VudCIsImNhdGVnb3JpZXMiLCJvcmRlcnNQZXJEYXkiLCJib29raW5nc1BlckRheSIsInJlbnRhbHNQZXJEYXkiLCJ0b3BCdXllcnMiLCJtb3N0Qm9va2VkUHJvZHVjdHMiLCJtb3N0UmVudGVkQ2FycyIsImJvb2tpbmdEdXJhdGlvblN0YXRzIiwicmVudGFsRHVyYXRpb25TdGF0cyIsInJlY2VudE9yZGVycyIsInJlY2VudEJvb2tpbmdzIiwicmVjZW50UmVudGFscyIsIlByb21pc2UiLCJhbGwiLCJjb2xsZWN0aW9uIiwiY291bnREb2N1bWVudHMiLCJmaW5kIiwidG9BcnJheSIsImFnZ3JlZ2F0ZSIsIiRncm91cCIsIl9pZCIsIiRkYXRlVG9TdHJpbmciLCJmb3JtYXQiLCJkYXRlIiwiY291bnQiLCIkc3VtIiwiJHNvcnQiLCJuYW1lIiwiJGZpcnN0IiwiY2l0eSIsImNvdW50cnkiLCJvcmRlckNvdW50IiwiJGxpbWl0IiwiJHByb2plY3QiLCJlbWFpbCIsImR1cmF0aW9uRGF5cyIsIiRkaXZpZGUiLCIkc3VidHJhY3QiLCJhdmdEdXJhdGlvbiIsIiRhdmciLCJtaW5EdXJhdGlvbiIsIiRtaW4iLCJtYXhEdXJhdGlvbiIsIiRtYXgiLCJjcmVhdGVkQXQiLCIkZ3QiLCJzb3J0IiwibGltaXQiLCJjYXRlZ29yeURhdGEiLCJtYXAiLCJjYXRlZ29yeSIsInJlY2VudEFjdGl2aXRpZXMiLCJvcmRlciIsInR5cGUiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJvcmRlck51bWJlciIsIm1ldGFkYXRhIiwib3JkZXJJZCIsImJvb2tpbmciLCJwcm9kdWN0TmFtZSIsImJvb2tpbmdJZCIsInJlbnRhbCIsImNhck5hbWUiLCJyZW50YWxJZCIsImEiLCJiIiwic2xpY2UiLCJsZW5ndGgiLCJzb2NrZXQiLCJzZXJ2ZXIiLCJpbyIsImVtaXQiLCJzdGF0dXMiLCJqc29uIiwiYm9va2luZ0R1cmF0aW9uIiwicmVudGFsRHVyYXRpb24iLCJ0b3RhbFJldmVudWVTb3VyY2VzIiwib3JkZXJzIiwiYm9va2luZ3MiLCJyZW50YWxzIiwidGltZXN0YW1wIiwiZ2V0VGltZSIsImVycm9yIiwiY29uc29sZSIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/stats.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fstats&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cstats.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();